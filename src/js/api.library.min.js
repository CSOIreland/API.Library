var api=api||{};api.spinner={},api.spinner.count=0,api.spinner.progress={},api.spinner.progress.instance=null,api.spinner.progress.timeout=0,api.spinner.start=function(e=null){if(null!=e){$(e).find(".item-spinner").remove();var n=$("#spinner-holder").find(".item-spinner").clone();$(e).prepend($(n)),$(n).removeClass("d-none"),$(e).find(".item-spinner").show(),new ResizeObserver((()=>{$(e).find(n).find(".item-loader").css("margin-top",.5*$(e).height()-15)})).observe($(e)[0])}else api.spinner.count++||$("#spinner").show()},api.spinner.stop=function(e=null){null!=e?($(e).find(".item-spinner").find(".item-loader").addClass("d-none"),$(e).find(".item-spinner").remove()):(api.spinner.count&&api.spinner.count--,api.spinner.count||(api.spinner.progress.instance?(api.spinner.progress.stop(),setTimeout((function(){$("#spinner").fadeOut("slow")}),1e3)):$("#spinner").fadeOut("slow")))},api.spinner.progress.start=function(e){e&&(clearTimeout(api.spinner.progress.instance),api.spinner.progress.timeout=e,$("#spinner .progress").find("[name=bar]").css("width","1%").attr("aria-valuenow",1),$("#spinner .progress").find("[name=percentage]").text("1%"),$("#spinner .progress").show(),api.spinner.progress.setTimeout())},api.spinner.progress.stop=function(){clearTimeout(api.spinner.progress.instance),$("#spinner .progress").find("[name=bar]").css("width","100%").attr("aria-valuenow",100),$("#spinner .progress").find("[name=percentage]").text("100%"),$("#spinner .progress").fadeOut("slow")},api.spinner.progress.getTimeout=function(e,n){var i=e/n;return i=i/100*1*1e3},api.spinner.progress.setTimeout=function(){api.spinner.progress.timeout=Math.ceil(api.spinner.progress.timeout+api.spinner.progress.timeout/100*.5),api.spinner.progress.instance=setTimeout((function(){var e=Math.min(parseInt($("#spinner .progress").find("[name=bar]").attr("aria-valuenow"))+1,99);$("#spinner .progress").find("[name=bar]").css("width",e+"%").attr("aria-valuenow",e),$("#spinner .progress").find("[name=percentage]").text(e+"%"),api.spinner.progress.setTimeout()}),api.spinner.progress.timeout)},api.content={},api.content.params={},api.content.getParam=function(e){return api.content.params[e]},api.content.load=function(e,n,i,a){i=i||{},a=a||!1,!1!==new URI(n).is("relative")&&$.ajax({url:n,async:!1,success:function(n){api.content.params=i,a?$(e).append(n).promise().done((function(){api.content.params={}})):$(e).empty().html(n).promise().done((function(){api.content.params={}}))}})},api.content.navigate=function(e,n,i,a){i=i||null,a=a||null,!1!==new URI(n).is("relative")&&$(e).click((function(e){e.preventDefault(),$.ajax({url:n,async:!1,success:function(e){$("#body").hide().empty().html(e).fadeIn()}}),$("#navigation").find("*").removeClass("show"),$("#navigation").find("*").removeClass("active"),i&&$(i).addClass("active"),a&&$(a).addClass("active")}))},api.content.goTo=function(e,n,i,a){n=n||null,i=i||null,a=a||{},!1!==new URI(e).is("relative")&&($.ajax({url:e,async:!1,success:function(e){api.content.params=a,$("#body").hide().empty().html(e).fadeIn().promise().done((function(){api.content.params={}}))}}),$("#navigation").find("*").removeClass("show"),$("#navigation").find("*").removeClass("active"),n&&$(n).addClass("active"),i&&$(i).addClass("active"))},api.ajax={},api.ajax.callback=function(e,n,i){n=n||null,i=i||{};var a=window,o="";if("function"==typeof(o=a[e]))return jQuery.isEmptyObject(i)?o(n):o(n,i);for(var r=e.split("."),t=r.pop(),s=0;s<r.length;s++)a=a[r[s]];return!!a&&(o=a[t],jQuery.isEmptyObject(i)?o(n):o(n,i))},api.ajax.config=function(e,n,i){(i=i||{}).method=i.method||"GET",i.dataType=i.dataType||"json",i.jsonp=i.jsonp||!1,i.timeout=i.timeout||6e4,i.async=i.async||!1,ajaxParams={url:e,success:function(e){n(e)},error:function(n,i,a){console.log('An Internal Server has occurred: the configuration file "'+e+'" is missing or invalid.')}},$.extend(ajaxParams,i),$.ajax(ajaxParams)},api.ajax.jsonrpc={},api.ajax.jsonrpc.request=function(e,n,i,a,o,r,t,s,p=null){i=i||{},a=a||null,r=r||null,o=o||null,t=t||null,(s=s||{}).method=s.method||"POST",s.dataType=s.dataType||"json",s.jsonp=s.jsonp||!1,s.timeout=s.timeout||18e4;var c=void 0!==s.async&&!s.async;s.async=!0;var l=Math.floor(999999999*Math.random())+1,u={jsonrpc:"2.0",method:n,params:i,id:l},d={url:e,data:JSON.stringify(u),xhrFields:{withCredentials:!0},success:function(e){if("json"!=s.dataType||e.id==l)if(e.error){var n=null;e.error.data?$.isArray(e.error.data)&&e.error.data.length||$.isPlainObject(e.error.data)&&!$.isEmptyObject(e.error.data)?(n=$("<ul>",{class:"list-group"}),$.each(e.error.data,(function(e,i){var a=$("<li>",{class:"list-group-item",html:i.toString()});n.append(a)}))):n=e.error.data:n=e.error.message,api.modal.error(n),r&&api.ajax.callback(r,e.error,t)}else void 0!==e.result?a&&api.ajax.callback(a,e.result,o):api.modal.exception("An unexpected error has occurred. Please try again.");else api.modal.exception("An invalid JSON-RPC Identifier has been detected. Please try again.")},error:function(e,n,i){r?api.ajax.callback(r,null,t):"Unauthorized"==i||api.modal.exception("A Server or Network Error has occurred. Please try again.")},complete:function(){c&&api.spinner.stop(p),$("#nav-loader").removeClass("text-yellow fa-spin").addClass("text-navbar"),$("body").css("cursor","default")}};$.extend(d,s);try{return $("#nav-loader").removeClass("text-navbar").addClass("text-yellow fa-spin"),$("body").css("cursor","progress"),c&&api.spinner.start(p),api.cookie.session.extend(),$.ajax(d)}catch(e){return console.log(e),api.modal.exception("An unhandled Ajax exception has occurred. Please try again."),!1}},api.modal={},api.modal.confirm=function(e,n,i){$("#modal-confirm").find(".modal-body > p").empty().html(e),$("#modal-confirm").find("[name=confirm]").once("click",(function(){$("#modal-confirm").modal("hide").delay(100).queue((function(){n(i),$(this).dequeue()}))})),$("#modal-confirm").modal()},api.modal.success=function(e){$("#modal-success").find(".modal-body > p").empty().html(e),$("#modal-success").modal()},api.modal.error=function(e){$("#modal-error").find(".modal-body > p").empty().html(e),$("#modal-error").modal()},api.modal.information=function(e){$("#modal-information").find(".modal-body > p").empty().html(e),$("#modal-information").modal()},api.modal.exception=function(e){$("#modal-exception").find(".modal-body > p").empty().html(e),$("#modal-exception").modal()},api.uri={},api.uri.parse=function(e){var n=new n(e);return n.parseQuery(uri.search())},api.uri.isParam=function(e,n){n=n||window.location.href;var i=new URI(n);return e in URI.parseQuery(i.search())},api.uri.getParam=function(e,n){n=n||window.location.href;var i=new URI(n),a=URI.parseQuery(i.search());return e in a&&a[e]},api.uri.getNoHeader=function(){return api.uri.isParam(C_API_URI_NOHEADER)},api.uri.getNoNavbar=function(){return api.uri.isParam(C_API_URI_NONAVBAR)},api.uri.getNoFooter=function(){return api.uri.isParam(C_API_URI_NOFOOTER)},api.uri.getBody=function(){return api.uri.getParam(C_API_URI_BODY)},api.cookie={},api.cookie.session={},api.cookie.session.data={length:null,expiry:null,logoutEndpoint:null,logoutMethod:null},api.cookie.session.options={path:"/",secure:"true",sameSite:"strict"},api.cookie.session.confirmExtension=function(){},api.cookie.session.start=function(e,n,i){var a=Math.round((new Date).getTime()/1e3);Cookies.set(C_API_COOKIE_SESSION,$.extend(!0,{},api.cookie.session.data,{length:e,expiry:a+e,logoutEndpoint:n,logoutMethod:i}),api.cookie.session.options),window.setInterval(api.cookie.session.intervalRoutine,1e3)},api.cookie.session.extend=function(){var e=Cookies.getJSON(C_API_COOKIE_SESSION);if(e){var n=Math.round((new Date).getTime()/1e3);Cookies.set(C_API_COOKIE_SESSION,$.extend(!0,{},e,{length:e.length,expiry:n+e.length}),api.cookie.session.options)}},api.cookie.session.end=function(e,n){e=e||null,n=n||null;var i=Cookies.getJSON(C_API_COOKIE_SESSION);api.ajax.jsonrpc.request(e||i.logoutEndpoint,n||i.logoutMethod,null,"api.cookie.session.endCallbak"),Cookies.remove(C_API_COOKIE_SESSION)},api.cookie.session.endCallbak=function(e){e==C_API_AJAX_SUCCESS?window.location.href=window.location.pathname:api.modal.exception("An unexpected error has occurred. Please try again.")},api.cookie.session.intervalRoutine=function(){var e=Cookies.getJSON(C_API_COOKIE_SESSION);if(e&&!$.active){var n=Math.round((new Date).getTime()/1e3);n>e.expiry?api.cookie.session.end():n>e.expiry-60&&api.cookie.session.confirmExtension()}};